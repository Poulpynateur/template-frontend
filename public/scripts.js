(()=>{var e={321:e=>{const t={each:function(e,t,n){for(let o in t)t[o]["@ignore"]||s(e,n,t[o])},attr:function(e,t,n){e.setAttribute(n,t)},text:function(e,t){e.appendChild(document.createTextNode(t))},children:function(e,t){a(e,t)}};function n(e,t){return e?t[e]:t}function o(e,o){for(let r in t)if(r in e.dataset){let s=e.dataset[r].split(":");t[r](e,n(s[0],o),s[1]),e.removeAttribute("data-"+r)}}function r(e,t,n){if(e.children.length)for(let o=0;o<e.children.length;o++)r(e.children[o],t,n),t(e.children[o],n)}function s(e,t,n){let s=document.querySelector(`[data-template-name="${t}"]`).content.cloneNode(!0);r(s,o,n),e.appendChild(s)}function a(e,t){for(let n in t)s(e,n,t[n])}e.exports={reset:function(e,t){e.innerHTML="",a(e,t)}}},462:e=>{const t="http://api.degheselle.fr/";e.exports={get:function(e,n){let o=new XMLHttpRequest;if(!o)return console.error("Cannot create XMLHTTP instance."),!1;o.onreadystatechange=()=>{o.readyState===XMLHttpRequest.DONE&&(200===o.status?n(JSON.parse(o.responseText)):console.error(`Error with the request (status ${o.status})`))},o.open("GET",t+e),o.setRequestHeader("Content-Type","application/json"),o.send()},post:function(e,n,o,r){var s=new XMLHttpRequest;s.open("POST",t+e),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Authorization","Basic "+btoa(`${r.username}:${r.password}`)),s.send(JSON.stringify(o)),s.onreadystatechange=function(){s.readyState==XMLHttpRequest.DONE&&n(s.status,JSON.parse(s.response))}}}},391:(e,t,n)=>{const o=n(321);let r=null;const s=[];function a(e){let t=e.target;if(t.classList.toggle("active"),t.classList.contains("active"))s.push(t.getAttribute("value"));else{let e=s.indexOf(t.getAttribute("value"));-1!==e&&s.splice(e,1)}o.reset(document.getElementById("app"),function(e){for(let t of e.favorites)t["@ignore"]=!1,s.length&&!u(t.tags,s)&&(t["@ignore"]=!0);return e}(r))}function u(e,t){return t.every((t=>e.includes(t)))}e.exports={reset_menu_HTML:function(e){r=e,o.reset(document.getElementById("menu"),function(e){let t={};for(let n of e)for(let e of n.tags)t[e]=1;return{"tags-menu":Object.keys(t).sort()}}(r.favorites)),document.querySelectorAll(".menu .chip").forEach((e=>{e.addEventListener("click",a)}))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}(()=>{"use strict";const e=n(391),t=n(321),o=n(462);let r=null;function s(e,t){t?document.getElementById(e).classList.add("has-error"):document.getElementById(e).classList.remove("has-error")}o.get("favorites",(n=>{r=n,e.reset_menu_HTML(r),t.reset(document.getElementById("app"),r)})),document.querySelectorAll('[aria-label="Close"]').forEach((e=>{e.addEventListener("click",(()=>{document.getElementById("post_modal").classList.remove("active")}))})),document.getElementById("more_btn").addEventListener("click",(()=>{document.getElementById("post_modal").classList.add("active")})),document.getElementById("send_btn").addEventListener("click",(function(){s("auth_group",!1),s("form_group",!1);const{auth:e,favorite:t}={auth:{username:document.getElementById("input_username").value,password:document.getElementById("input_password").value},favorite:{title:document.getElementById("input_title").value,url:document.getElementById("input_url").value,thumbnail:document.getElementById("input_thumbnail").value,tags:document.getElementById("input_tags").value.split(";")}};o.post("favorites",((e,t)=>{401==e?s("auth_group",!0):200!=e&&(s("form_group",!0),console.error(`Error occured (${e}) : ${t.msg}`))}),t,e)}))})()})();